{{ define "main" }}
<section class="page-header">
  <div class="container">
    <h1>{{ .Title }}</h1>
    {{ with .Description }}<p class="page-intro">{{ . }}</p>{{ end }}
  </div>
</section>

<section class="section contact-section">
  <div class="container contact-grid">
    <div class="contact-form-wrapper">
      <form
        class="contact-form"
        id="contact-form"
        onsubmit="return handleContactSubmit(event)"
      >
        <input type="hidden" name="painting" id="painting-field" value="">

        <div class="form-group">
          <label for="name">{{ i18n "contact_form_name" }} *</label>
          <input type="text" id="name" name="name" required autocomplete="name">
        </div>

        <div class="form-group">
          <label for="email">{{ i18n "contact_form_email" }} *</label>
          <input type="email" id="email" name="email" required autocomplete="email">
        </div>

        <div class="form-group">
          <label for="phone">{{ i18n "contact_form_phone" }}</label>
          <input type="tel" id="phone" name="phone" autocomplete="tel">
        </div>

        <div class="form-group">
          <label for="message">{{ i18n "contact_form_message" }} *</label>
          <textarea id="message" name="message" rows="6" required></textarea>
        </div>

        <button type="submit" class="btn btn-primary">{{ i18n "contact_form_submit" }}</button>
      </form>
    </div>

    <div class="contact-info">
      {{ .Content }}

      {{ with .Site.Params.email }}
        <p><strong>Email:</strong> <a href="mailto:{{ . }}">{{ . }}</a></p>
      {{ end }}
      {{ with .Site.Params.phone }}
        <p><strong>{{ if eq $.Language.LanguageCode "nl" }}Telefoon{{ else }}Phone{{ end }}:</strong> <a href="tel:{{ . }}">{{ . }}</a></p>
      {{ end }}
    </div>
  </div>
</section>

<script>
function handleContactSubmit(e) {
  e.preventDefault();
  var form = document.getElementById('contact-form');
  if (!form.checkValidity()) {
    form.reportValidity();
    return;
  }
  var name = document.getElementById('name').value;
  var email = document.getElementById('email').value;
  var phone = document.getElementById('phone').value;
  var message = document.getElementById('message').value;
  var painting = document.getElementById('painting-field').value;

  var subject = painting
    ? '{{ if eq .Language.LanguageCode "nl" }}Interesse in{{ else }}Inquiry about{{ end }} ' + painting
    : '{{ if eq .Language.LanguageCode "nl" }}Contactverzoek via website{{ else }}Contact request via website{{ end }}';

  var body = message + '\n\n---\n' + name + '\n' + email;
  if (phone) body += '\n' + phone;

  window.location.href = 'mailto:{{ .Site.Params.email }}'
    + '?subject=' + encodeURIComponent(subject)
    + '&body=' + encodeURIComponent(body);
}
</script>
{{ end }}
